<!DOCTYPE html>

<html>
	<head>
		<meta charset="utf-8">
		
		<meta name="viewport" content="width=device-width, user-scalable=no, minimum-scale=1.0, maximum-scale=1.0">
		
	</head>
	
	<body>
		<h3>alpha = <span id="alpha"></span></h3>
		<h3>beta = <span id="beta"></span></h3>
		<h3>gamma = <span id="gamma"></span></h3>
		<h3>absolute = <span id="absolute"></span></h3>
        <button id="request" style="background-color: #e7e7e7; color: black; width: 100px; height: 50px;" > request permission</button>

		<script>
            function onClick() {
                // feature detect
                if (typeof DeviceOrientationEvent.requestPermission === 'function') {
                DeviceOrientationEvent.requestPermission()
                    .then(permissionState => {
                    if (permissionState === 'granted') {
                        // window.addEventListener('deviceorientation', () => {});
                        window.addEventListener("deviceorientation", deviceOrientation, true);

                    }
                    })
                    .catch(console.error);
                } else {
                    document.getElementById('alpha').innerHTML = "error";
                    window.addEventListener("deviceorientation", deviceOrientation, true);

                // handle regular non iOS 13+ devices
                }
            }
            const btn = document.getElementById( "request" );
            btn.addEventListener( "click", onClick );
                

		
			// слушаме за събитието на ориентацията на устройство

			// функция, която показва данните на ориентацията
			function deviceOrientation(event)
			{
				document.getElementById('alpha').innerHTML = event.alpha.toFixed(1);
				document.getElementById('beta').innerHTML = event.beta.toFixed(1);
				document.getElementById('gamma').innerHTML = event.gamma.toFixed(1);
				document.getElementById('absolute').innerHTML = event.absolute;
			}
			
		</script>
	</body>
</html>