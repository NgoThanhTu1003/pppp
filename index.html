<!DOCTYPE html>

<html>
	<head>
		<meta charset="utf-8">
		
		<meta name="viewport" content="width=device-width, user-scalable=no, minimum-scale=1.0, maximum-scale=1.0">
		<script type="importmap">
		  {
			"imports": {
			  "three": "https://cdn.jsdelivr.net/npm/three@0.180.0/build/three.module.js",
			  "three/addons/": "https://cdn.jsdelivr.net/npm/three@0.180.0/examples/jsm/",
              "physijs": "./physijs/physi.module.js",
              "vax": "./vax-physi.js"
			}
		  }
	</script>
	</head>
	
	<body>
        <button id="request" onclick="onClick(); removeBtn(this); " style="background-color: #e7e7e7; color: black; width: 100px; height: 50px;" > request permission</button>
		<h3>alpha = <span id="alpha"></span></h3>
		<h3>beta = <span id="beta"></span></h3>
		<h3>gamma = <span id="gamma"></span></h3>
		<h3>absolute = <span id="absolute"></span></h3>

		<script type="module">
        import * as THREE from 'three';
			

            function onClick() {
                if (typeof DeviceOrientationEvent.requestPermission === 'function') {
                DeviceOrientationEvent.requestPermission()
                    .then(permissionState => {
                    if (permissionState === 'granted') {
                        window.addEventListener("deviceorientation", deviceOrientation, true);
                    }
                    })
                    .catch(console.error);
                } else {
                    window.addEventListener("deviceorientation", deviceOrientation, true);

                }
            }
                
			function removeBtn(bnt){
				var element = bnt;
				element.remove(bnt);
			}
		

			function deviceOrientation(event){
        		var gamma = event.gamma.toFixed(1);

				// document.getElementById('alpha').innerHTML = event.alpha.toFixed(1);
				document.getElementById('gama-90').innerHTML = THREE.MathUtils.degToRad(gamma-90);
				document.getElementById('gamma').innerHTML = THREE.MathUtils.degToRad(gamma);
				// document.getElementById('absolute').innerHTML = event.absolute;
			}
			
		</script>
	</body>

</html>
